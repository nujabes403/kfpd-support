"use strict";angular.module("initApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMessages","firebase","firebase.ref","firebase.auth","ngMaterial","ui.grid","ui.grid.edit"]).config(["$mdDateLocaleProvider","$mdThemingProvider",function(a,b){a.months=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],a.shortMonths=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],a.shortDays=["일","월","화","수","목","금","토"],b.theme("docs-dark","default").primaryPalette("yellow").dark()}]),angular.module("initApp").controller("MainCtrl",["$scope","FBURL","$firebaseObject",function(a,b,c){a.myData=[{firstName:"Cox",lastName:"Carney",company:"Enormo",employed:!0},{firstName:"Lorraine",lastName:"Wise",company:"Comveyer",employed:!1},{firstName:"Nancy",lastName:"Waters",company:"Fuelton",employed:!1}]}]),angular.module("firebase.config",[]).constant("FBURL","https://msgboardtest.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["password"]).constant("ADMINKEY","38ed79bc-8819-4518-997e-8227280bf90c").constant("loginRedirectPath","/login"),angular.module("firebase.ref",["firebase","firebase.config"]).factory("Ref",["$window","FBURL",function(a,b){return new a.Firebase(b)}]),angular.module("initApp").controller("ChatCtrl",["$scope","Ref","$firebaseArray","$timeout",function(a,b,c,d){function e(b){a.err=b,d(function(){a.err=null},5e3)}a.messages=c(b.child("messages").limitToLast(10)),a.messages.$loaded()["catch"](e),a.addMessage=function(b){b&&a.messages.$add({text:b})["catch"](e)}}]),angular.module("initApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),function(){angular.module("firebase.auth",["firebase","firebase.ref"]).factory("Auth",["$firebaseAuth","Ref",function(a,b){return a(b)}])}(),angular.module("initApp").controller("LoginCtrl",["$scope","Auth","$location","$q","Ref","$timeout",function(a,b,c,d,e,f){function g(a){return h(a.substr(0,a.indexOf("@"))||"")}function h(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function i(){c.path("/account")}function j(b){a.err=b}a.passwordLogin=function(c,d){a.err=null,b.$authWithPassword({email:c,password:d},{rememberMe:!0}).then(i,j)},a.createAccount=function(c,h,k){function l(a){var b=e.child("users").child(a.uid),h=d.defer();return"admin"==c.split("@")[1].split(".")[0]?(b=e.child("ADMIN").child(a.uid),b.set({email:c,name:g(c),state:"admin"},function(a){f(function(){a?h.reject(a):h.resolve(b)})})):b.set({email:c,name:g(c),state:"user"},function(a){f(function(){a?h.reject(a):h.resolve(b)})}),h.promise}a.err=null,h?h!==k?a.err="Passwords do not match":b.$createUser({email:c,password:h}).then(function(){return b.$authWithPassword({email:c,password:h},{rememberMe:!0})}).then(l).then(i,j):a.err="Please enter a password"}}]),angular.module("initApp").controller("AccountCtrl",["$scope","user","Auth","Ref","$firebaseObject","$timeout",function(a,b,c,d,e,f){function g(a){i(a,"danger")}function h(a){i(a,"success")}function i(b,c){var d={text:b+"",type:c};a.messages.unshift(d),f(function(){a.messages.splice(a.messages.indexOf(d),1)},1e4)}a.user=b,a.logout=function(){c.$unauth()},a.messages=[];var j=e(d.child("users/"+b.uid));j.$bindTo(a,"profile"),a.changePassword=function(b,d,e){a.err=null,b&&d?d!==e?g("Passwords do not match"):c.$changePassword({email:j.email,oldPassword:b,newPassword:d}).then(function(){h("Password changed")},g):g("Please enter all fields")},a.changeEmail=function(b,d){a.err=null,c.$changeEmail({password:b,newEmail:d,oldEmail:j.email}).then(function(){j.email=d,j.$save(),h("Email changed")})["catch"](g)}}]),angular.module("initApp").directive("ngShowAuth",["Auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuth(e),e()}}}]),angular.module("initApp").directive("ngHideAuth",["Auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuth(e),e()}}}]),angular.module("initApp").config(["$routeProvider","SECURED_ROUTES",function(a,b){a.whenAuthenticated=function(c,d){return d.resolve=d.resolve||{},d.resolve.user=["Auth",function(a){return a.$requireAuth()}],a.when(c,d),b[c]=!0,a}}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/yo",{templateUrl:"views/yo.html",controller:"YoCtrl"}).when("/createOrder",{templateUrl:"views/createorder.html",controller:"CreateorderCtrl"}).when("/incomeExpense",{templateUrl:"views/incomeexpense.html",controller:"IncomeexpenseCtrl"}).when("/sales",{templateUrl:"views/sales/sales.html",controller:"SalesCtrl"}).when("/sale-detail/new",{templateUrl:"views/sales/sale-detail.html",controller:"SaleNewCtrl"}).when("/sale-detail/edit/:id",{templateUrl:"views/sales/sale-detail.html",controller:"SaleDetailCtrl"}).when("/billManage",{templateUrl:"views/billmanage.html",controller:"BillmanageCtrl"}).when("/purchase",{templateUrl:"views/purchase.html",controller:"PurchaseCtrl"}).when("/beforeBillSearch",{templateUrl:"views/beforebillsearch.html",controller:"BeforebillsearchCtrl"}).when("/IncomeExpense",{templateUrl:"views/incomeexpense.html",controller:"IncomeexpenseCtrl"}).when("/tax",{templateUrl:"views/tax.html",controller:"TaxCtrl"}).when("/customer",{templateUrl:"views/customers/customer.html",controller:"CustomerCtrl"}).when("/newCustomer",{templateUrl:"views/customers/newcustomer.html",controller:"NewcustomerCtrl"}).when("/customerDetail/:id",{templateUrl:"views/customers/customerdetail.html",controller:"CustomerdetailCtrl"}).when("/product",{templateUrl:"views/products/product.html",controller:"ProductCtrl"}).when("/frames",{templateUrl:"views/products/frames/frames.html",controller:"FramesCtrl"}).when("/frame-new",{templateUrl:"views/products/frames/frame-new.html",controller:"NewframeCtrl"}).when("/frameDetail/:id",{templateUrl:"views/products/frames/framedetail.html",controller:"FramedetailCtrl"}).when("/doors",{templateUrl:"views/products/doors/doors.html",controller:"DoorsCtrl"}).when("/doors-detail/edit/:id",{templateUrl:"views/doors-detail.html",controller:"DoorsDetailCtrl"}).when("/doors-detail/new",{templateUrl:"views/products/doors/doors-detail.html",controller:"DoorsNewCtrl"}).when("/gates",{templateUrl:"views/gates.html",controller:"GatesCtrl"}).when("/gate-detail/edit/:id",{templateUrl:"views/products/gates/gate-detail.html",controller:"GateDetailCtrl"}).when("/gate-detail/new",{templateUrl:"views/products/gates/gate-detail.html",controller:"GateNewCtrl"}).when("/parts",{templateUrl:"views/products/parts/parts.html",controller:"PartsCtrl"}).when("/part-detail/edit/:id",{templateUrl:"views/products/parts/part-detail.html",controller:"PartDetailCtrl"}).when("/part-detail/new",{templateUrl:"views/products/parts/part-detail.html",controller:"PartNewCtrl"}).when("/gate-new",{templateUrl:"views/products/gates/gate-new.html",controller:"GateNewCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).when("/confirmManufacture",{templateUrl:"views/confirmmanufacture.html",controller:"ConfirmmanufactureCtrl"}).when("/processManage",{templateUrl:"views/processmanage.html",controller:"ProcessmanageCtrl"}).when("/paintManage",{templateUrl:"views/paintmanage.html",controller:"PaintmanageCtrl"}).when("/inouts",{templateUrl:"views/inouts.html",controller:"InoutsCtrl"}).when("/msgBoard",{templateUrl:"views/needlogin.html"}).when("/msgBoard/:userkey",{templateUrl:"views/msgboard.html",controller:"MsgboardCtrl"}).when("/msgBoardAdmin",{templateUrl:"views/msgboardadmin.html",controller:"MsgboardadminCtrl"}).when("/msgBoard/:userkey/:msgItem",{templateUrl:"views/msgitem.html",controller:"MsgitemCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","Auth","SECURED_ROUTES","loginRedirectPath",function(a,b,c,d,e){function f(a){!a&&g(b.path())&&b.path(e)}function g(a){return d.hasOwnProperty(a)}c.$onAuth(f),a.$on("$routeChangeError",function(a,c,d,f){"AUTH_REQUIRED"===f&&b.path(e)})}]).constant("SECURED_ROUTES",{}),angular.module("initApp").controller("AppCtrl",["$scope","$timeout","$mdSidenav","$log","Ref","Auth",function(a,b,c,d,e,f){function g(c,d,e){var f;return function(){var e=a,g=Array.prototype.slice.call(arguments);b.cancel(f),f=b(function(){f=void 0,c.apply(e,g)},d||10)}}function h(a){return g(function(){c(a).toggle().then(function(){d.debug("toggle "+a+" is done")})},200)}function i(a){return function(){c(a).toggle().then(function(){d.debug("toggle "+a+" is done")})}}a.toggleLeft=h("left"),a.toggleRight=i("right"),a.isOpenRight=function(){return c("right").isOpen()},a.logout=function(){f.$unauth(),console.log("로그아웃 되었습니다.")}}]).controller("LeftCtrl",["$scope","$timeout","$mdSidenav","$log","$location","Auth","CheckAdminService",function(a,b,c,d,e,f,g){function h(b){g.adminChecker(b).then(function(c){"admin"==c?(a.routeUID=b.uid,a.menus=a.menus.map(function(a){return"메시지보드"==a.name&&(a.href="msgBoardAdmin"),a})):(a.routeUID=b.uid,a.menus=a.menus.map(function(c){return"메시지보드"==c.name&&(b?c.href="msgBoard/"+a.routeUID:c.href="msgBoard"),c}))})}function i(c,d,e){var f;return function(){var e=a,g=Array.prototype.slice.call(arguments);b.cancel(f),f=b(function(){f=void 0,c.apply(e,g)},d||10)}}function j(a){return i(function(){c(a).toggle().then(function(){d.debug("toggle "+a+" is done")})},200)}a["goto"]=function(a){c("left").close(),e.path(a)},f.$onAuth(function(a){h(a)}),a.menus=[{name:"판매관리",href:"sales"},{name:"외상대출금관리",href:"billManage"},{name:"매입관리",href:"purchase"},{name:"외상매입금조회",href:"beforeBillSearch"},{name:"수입지출관리",href:"inouts"},{name:"부가세조회",href:"tax"},{name:"거래처관리",href:"customer"},{name:"제품관리",href:"product"},{name:"과거자료조회",href:"history"},{name:"공장확인요청목록",href:"confirmManufacture"},{name:"제작관리",href:"processManage"},{name:"분체도장관리",href:"paintManage"},{name:"메시지보드",href:"msgBoard"}],a.close=function(){c("left").close().then(function(){d.debug("close LEFT is done")})},a.toggleLeft=j("left")}]).controller("RightCtrl",["$scope","$timeout","$mdSidenav","$log",function(a,b,c,d){a.close=function(){c("right").close().then(function(){d.debug("close RIGHT is done")})}}]),angular.module("initApp").controller("YoCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("CreateorderCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("IncomeexpenseCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("SalesCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("BillmanageCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("PurchaseCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("BeforebillsearchCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("TaxCtrl",["$scope","$firebaseArray","MessageList","FBURL",function(a,b,c,d){var e=new Firebase(d).child("messages");a.msgList=c(e),a.msgs=b(e),a.addNew=function(b){a.msgList.$add({name:"12"}),console.log(a.msgList),a.msgList[0].update(a.msgs[0])}}]),angular.module("initApp").controller("CustomerCtrl",["$scope","$location","CustomerService",function(a,b,c){a.customers=c.listCustomer(),a.goToDetail=function(a){b.path("customerDetail/"+a)}}]),angular.module("initApp").controller("ProductCtrl",["$scope","$location",function(a,b){a.goTo=function(a){b.path(a)}}]),angular.module("initApp").controller("HistoryCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("ConfirmmanufactureCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("ProcessmanageCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("PaintmanageCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("NewcustomerCtrl",["$rootScope","$scope","$location","FBURL","CustomerService","$firebaseObject",function(a,b,c,d,e,f){var g=new Firebase(d).child("customers");b.showHints=!0,b.customerForm=null,b.isDup=!1,b.customerObj={},b.checkDuplicate=function(){if(console.log("check"),0!==b.customerForm.name.length){var a=f(g.child(b.customerForm.name));a.$loaded().then(function(a){console.log(a),null==a.name?b.isDup=!1:b.isDup=!0})}},b.createCustomer=function(){var e=new Firebase(d).child("customers"),f=function(b){b?alert("[에러]:"+b):(alert("성공적으로 저장되었습니다."),a.$apply(function(){c.path("/customer")}))},g=e.child(b.customerForm.name);g.set(b.customerForm,f)}}]),angular.module("initApp").factory("CustomerService",["$location","FBURL","$firebaseArray","$firebaseObject",function(a,b,c,d){var e=new Firebase(b).child("customers"),f=function(b){b?alert("[에러]:"+b):(a.path("customer"),alert("성공적으로 저장되었습니다."))};return{addNewCustomer:function(a){console.log(a);var b=e.child(a.name);b.set(a,f)},updateCustomer:function(a,b){},deleteCustomer:function(a){},findCustomer:function(a){},listCustomer:function(a,b){return c(e)}}}]),angular.module("initApp").filter("isIndividualText",function(){return function(a){return"true"===a?"개인":"거래처"}}),angular.module("initApp").controller("CustomerdetailCtrl",["$rootScope","$scope","$routeParams","$location","FBURL","$firebaseObject",function(a,b,c,d,e,f){var g=new Firebase(e).child("customers").child(c.id);b.cstObj=f(g),b.deleteCustomer=function(){b.cstObj.$remove().then(function(a){alert("성공적으로 삭제 되었습니다."),d.path("customer")},function(a){console.log("[에러]::",a)})},b.updateCustomer=function(){b.cstObj.$save().then(function(a){alert("성공적으로 업데이트 되었습니다."),d.path("/customer")},function(a){alert("[에러]:",a)})}}]),angular.module("initApp").controller("FramesCtrl",["$scope","$location","FrameService",function(a,b,c){a.frames=c.listFrame(),a.goToDetail=function(a){b.path("frameDetail/"+a)}}]),angular.module("initApp").controller("NewframeCtrl",["$scope","$rootScope","$location","FBURL","$firebaseArray","$mdDialog","$mdMedia","FrameService",function(a,b,c,d,e,f,g,h){var i=new Firebase(d).child("frameOptions");i.orderByChild("published").equalTo(!0);a.showAdvanced=function(b){var c=(g("sm")||g("xs"))&&a.customFullscreen;f.show({controller:"DialogCtrl",templateUrl:"views/tmp/dialog1.tmp.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,fullscreen:c}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return g("xs")||g("sm")},function(b){a.customFullscreen=b===!0})},a.showOptions=function(b){var c=(g("sm")||g("xs"))&&a.customFullscreen;f.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,fullscreen:c}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return g("xs")||g("sm")},function(b){a.customFullscreen=b===!0})},a.createFrame=function(){a.customerForm.options=[],a.frameOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.customerForm.options.push(c)}});var b=h.addNewFrame(a.customerForm);b.then(function(a){alert("Success: "+a),c.path("/frames")},function(a){alert("Error: "+result)},function(a){console.log(a)})};var j=function(){h.listOptions().then(function(b){a.frameOptions=b},function(a){alert("Error: "+result)},function(a){console.log(a)})};j()}]),angular.module("initApp").controller("FramedetailCtrl",["$rootScope","$scope","$routeParams","$location","FBURL","$firebaseObject","$mdDialog","$mdMedia",function(a,b,c,d,e,f,g,h){var i=new Firebase(e).child("frames").child(c.id);b.frameObj=f(i),b.frameOptions=[],b.frameObj.$loaded().then(function(a){void 0!==a.options?b.frameOptions=a.options:b.frameOptions=[]}),b.deleteFrame=function(){b.frameObj.$remove().then(function(a){alert("성공적으로 삭제 되었습니다."),d.path("frames")},function(a){console.log("[에러]::",a)})},b.updateFrame=function(){b.frameObj.$save().then(function(a){alert("성공적으로 업데이트 되었습니다."),d.path("/frames")},function(a){alert("[에러]:",a)})},b.showAdvanced=function(a){var c=(h("sm")||h("xs"))&&b.customFullscreen;g.show({controller:"DialogCtrl",templateUrl:"views/tmp/dialog1.tmp.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:c}).then(function(a){b.status='You said the information was "'+a+'".'},function(){b.status="You cancelled the dialog."}),b.$watch(function(){return h("xs")||h("sm")},function(a){b.customFullscreen=a===!0})},b.showOptions=function(a){var c=(h("sm")||h("xs"))&&b.customFullscreen;g.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:a,locals:{target:"frameOptions"},clickOutsideToClose:!0,fullscreen:c}).then(function(a){b.status='You said the information was "'+a+'".'},function(){b.status="You cancelled the dialog."}),b.$watch(function(){return h("xs")||h("sm")},function(a){b.customFullscreen=a===!0})},b.deleteOption=function(){alert("deleted")}}]),angular.module("initApp").factory("FrameService",["$q","FBURL","$firebaseArray",function(a,b,c){var d=new Firebase(b).child("frames"),e=new Firebase(b).child("frameOptions");return{addNewFrame:function(b){var c=a.defer();c.notify("addNewFrame working with: "+b.type+".");var e=d.push();return e.set(b,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},updateFrame:function(a,b){},deleteFrame:function(a){},findFrame:function(a){},listFrame:function(a,b){return c(d)},listOptions:function(){var b=a.defer();return c(e).$loaded().then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise},createOptions:function(b){var c=a.defer(),d={name:b,price:0,published:!0},f=e.child(d.name);return f.set(d,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},deleteOptions:function(b){var c=a.defer(),d=e.child(b),f=function(a){a?c.reject(a):c.resolve("해당 옵션을 삭제 하였습니다.")};return d.remove(f),c.promise},updateOptions:function(b,c){var d=a.defer(),f=e.child(b),g=function(a){a?d.reject(a):d.resolve("해당 옵션을 저장하였습니다.")};return f.update(c,g),d.promise}}}]),angular.module("initApp").filter("frameDoorType",function(){return function(a){return"true"===a?"편개":"양개"}}),angular.module("initApp").filter("frameType",function(){return function(a){return"1"===a?"일반":"2"===a?"스텐":"3"===a?"매립":"4"===a?"구로":"5"===a?"아연":void 0}}),angular.module("initApp").controller("OptionListDialogCtrl",["$scope","$mdDialog","FBURL","$firebaseArray","FrameService","DoorService","GateService","target",function(a,b,c,d,e,f,g,h){var i=new Firebase(c).child(h);console.log(h),a.options=d(i),a.updatePubStatus=function(b){a.options.$save(b)},a.answer=function(c){a.options.$save(),b.hide(c)},a.deleteRecord=function(b){a.options.$remove(b)},a.createNewOption=function(a){"frameOptions"==h?e.createOptions(a):"doorOptions"==h?(console.log(a),f.createOptions(a)):"gateOptions"==h&&(console.log(a),g.createOptions(a))}}]),angular.module("initApp").controller("DialogCtrl",["$scope","$mdDialog","FBURL","$firebaseObject","FrameService",function(a,b,c,d,e){a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){b.hide(a)},a.optionForm={name:"",price:0,published:!0},a.isDup=!1;new Firebase(c).child("frameOptions");a.createOptions=function(){e.createOptions(a.optionName)}}]),angular.module("initApp").factory("lodashService",function(){return{extract:function(a){return _.filter(a,function(a){return a.published})}}}),angular.module("initApp").controller("DoorsCtrl",["$scope","$location","DoorService","uiGridConstants",function(a,b,c,d){a.doors=c.listDoor(),a.doors.$loaded().then(function(){}),a.goToDetail=function(a){console.log(a),b.path("doors-detail/edit/"+a.entity.$id)},a.gridOptions={showGridFooter:!0,rowTemplate:'<div ng-dblclick="grid.appScope.goToDetail(row)" ng-class="{ \'my-css-class\': grid.appScope.rowFormatter( row ) }">  <div ng-if="row.entity.merge">{{row.entity.title}}</div>  <div ng-if="!row.entity.merge" ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',columnDefs:[{field:"type",displayName:"종류",cellFilter:"frameType",cellClass:"grid-align-center"},{field:"doorType",displayName:"편개/양개",cellFilter:"frameDoorType",cellClass:"grid-align-center"},{field:"thick",displayName:"철판",cellClass:"grid-align-end"},{field:"width",displayName:"폭",cellClass:"grid-align-end"},{field:"height",displayName:"높이",cellClass:"grid-align-end"},{field:"orgPrice",displayName:"가격",cellFilter:"number",cellClass:"grid-align-end"}],data:a.doors}}]),angular.module("initApp").controller("DoorsDetailCtrl",["$scope","$routeParams","$location","DoorService","$mdDialog","$mdMedia",function(a,b,c,d,e,f){a.title="문관리",a.action1="수정",a.action2="삭제",a.doorOptions=[],a.doorObj=d.findDoor(b.id),a.doorObj.$loaded().then(function(b){void 0!==b.options?a.doorOptions=b.options:a.doorOptions=[]}),a.action1Process=function(){a.doorObj.options=[],a.doorOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.doorObj.options.push(c)}});var b=d.updateDoor(a.doorObj);b.then(function(a){alert("Success: "+a),c.path("/doors")},function(a){alert("Error: "+a)},function(a){console.log(a)})},a.action2Process=function(){var b=d.deleteDoor(a.doorObj);b.then(function(a){alert("Success: "+a),c.path("/doors")},function(a){alert("Error: "+a)},function(a){console.log(a)})},a.showOptions=function(b){var c=(f("sm")||f("xs"))&&a.customFullscreen;e.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:b,locals:{target:"doorOptions"},clickOutsideToClose:!0,fullscreen:c}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return f("xs")||f("sm")},function(b){a.customFullscreen=b===!0})}}]),angular.module("initApp").controller("DoorsNewCtrl",["$scope","$location","$mdMedia","$mdDialog","DoorService",function(a,b,c,d,e){a.title="문등록",a.action1="등록",a.action2="취소";var f=e.listOptions();f.then(function(b){a.doorOptions=b}),a.action1Process=function(){a.doorObj.options=[],a.doorOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.doorObj.options.push(c)}});var c=e.addNewDoor(a.doorObj);c.then(function(a){alert("Success: "+a),b.path("/doors")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.action2Process=function(){a.doorObj=null};var g=function(){e.listOptions().then(function(b){a.doorOptions=b},function(a){alert("Error: "+a)},function(a){console.log(a)})};a.showOptions=function(b){var e=(c("sm")||c("xs"))&&a.customFullscreen;d.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:b,locals:{target:"doorOptions"},clickOutsideToClose:!0,fullscreen:e}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return c("xs")||c("sm")},function(b){a.customFullscreen=b===!0})},g()}]),angular.module("initApp").factory("DoorService",["$q","FBURL","$firebaseObject","$firebaseArray",function(a,b,c,d){var e=new Firebase(b).child("doors"),f=new Firebase(b).child("doorOptions");return{addNewDoor:function(b){var c=a.defer();c.notify("addNewDoor working with: "+b.type+".");var d=e.push();return d.set(b,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},updateDoor:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$save().then(function(a){c.resolve("성공적으로 수정되었습니다.")},function(a){c.reject(a)}),c.promise},deleteDoor:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$remove().then(function(a){c.resolve("성공적으로 삭제되었습니다.")},function(a){c.reject(a)}),c.promise},findDoor:function(a){return c(e.child(a))},listDoor:function(a,b){return d(e)},listOptions:function(){var b=a.defer();return d(f).$loaded().then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise},createOptions:function(b){var c=a.defer(),d={name:b,price:0,published:!0},e=f.child(b);return e.set(d,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},deleteOptions:function(b){var c=a.defer(),d=f.child(b),e=function(a){a?c.reject(a):c.resolve("해당 옵션을 삭제 하였습니다.")};return d.remove(e),c.promise},updateOptions:function(b,c){var d=a.defer(),e=f.child(b),g=function(a){a?d.reject(a):d.resolve("해당 옵션을 저장하였습니다.")};return e.update(c,g),d.promise}}}]),angular.module("initApp").controller("GatesCtrl",["$scope","$location","GateService",function(a,b,c){a.gates=c.listGate(),a.goToDetail=function(a){b.path("gate-detail/edit/"+a)}}]),angular.module("initApp").controller("GateDetailCtrl",["$scope","$routeParams","$location","$mdMedia","$mdDialog","GateService",function(a,b,c,d,e,f){a.title="기성문관리",a.action1="수정",a.action2="삭제",a.gateObj=f.findGate(b.id),a.gateObj.$loaded().then(function(b){a.gateOptions=b.options});var g=f.listOptions();g.then(function(b){a.gateOptions=b}),a.action1Process=function(){a.gateObj.options=[],a.gateOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.gateObj.options.push(c)}});var b=f.updateGate(a.gateObj);b.then(function(a){alert("Success: "+a),c.path("/gates")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.action2Process=function(){var b=f.deleteGate(a.gateObj);b.then(function(a){alert("Success: "+a),c.path("/gates")},function(a){alert("Error: "+a)},function(a){console.log(a)})},a.showOptions=function(b){var c=(d("sm")||d("xs"))&&a.customFullscreen;e.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:b,locals:{target:"gateOptions"},clickOutsideToClose:!0,fullscreen:c}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return d("xs")||d("sm")},function(b){a.customFullscreen=b===!0})};var h=function(){f.listOptions().then(function(b){a.gateOptions=b},function(a){alert("Error: "+a)},function(a){console.log(a)})};h()}]),angular.module("initApp").controller("PartsCtrl",["$scope","$location","PartService",function(a,b,c){a.parts=c.listPart(),a.goToDetail=function(a){console.log(a),b.path("part-detail/edit/"+a.entity.$id)},a.gridOptions={showGridFooter:!0,rowTemplate:'<div ng-dblclick="grid.appScope.goToDetail(row)" ng-class="{ \'my-css-class\': grid.appScope.rowFormatter( row ) }">  <div ng-if="row.entity.merge">{{row.entity.title}}</div>  <div ng-if="!row.entity.merge" ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',columnDefs:[{field:"name",displayName:"품명",cellClass:"grid-align-center"},{field:"standard",displayName:"규격",cellClass:"grid-align-center"},{field:"orgPrice",displayName:"가격",cellClass:"grid-align-end",cellFilter:"number"},{field:"note",displayName:"비고",cellClass:"grid-align-end"}],data:a.parts}}]),angular.module("initApp").controller("PartDetailCtrl",["$scope","$routeParams","$location","PartService",function(a,b,c,d){a.title="부속품 관리",a.action1="수정",a.action2="삭제",a.partObj=d.findPart(b.id),a.action1Process=function(){a.partObj.options=[],a.gateOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.partObj.options.push(c)}});var b=d.updatePart(a.partObj);b.then(function(a){alert("Success: "+a),c.path("/gates")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.action2Process=function(){var b=d.deletePart(a.partObj);b.then(function(a){alert("Success: "+a),c.path("/gates")},function(a){alert("Error: "+a)},function(a){console.log(a)})}}]),angular.module("initApp").controller("GateNewCtrl",["$scope","$mdMedia","$mdDialog","GateService",function(a,b,c,d){a.title="기성문등록",a.action1="등록",a.action2="취소";var e=d.listOptions();e.then(function(b){a.gateOptions=b}),a.action1Process=function(){a.gateObj.options=[],a.gateOptions.forEach(function(b){if(b.price>0){var c={name:b.name,price:b.price};a.gateObj.options.push(c)}});var b=d.addNewGate(a.gateObj);b.then(function(a){alert("Success: "+a),$location.path("/gates")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.action2Process=function(){a.gateObj=null},a.showOptions=function(d){var e=(b("sm")||b("xs"))&&a.customFullscreen;c.show({controller:"OptionListDialogCtrl",templateUrl:"views/tmp/frameOptionList.tmp.html",parent:angular.element(document.body),targetEvent:d,locals:{target:"gateOptions"},clickOutsideToClose:!0,fullscreen:e}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return b("xs")||b("sm")},function(b){a.customFullscreen=b===!0})};var f=function(){d.listOptions().then(function(b){a.gateOptions=b},function(a){alert("Error: "+a)},function(a){console.log(a)})};f()}]),angular.module("initApp").factory("GateService",["$q","FBURL","$firebaseObject","$firebaseArray",function(a,b,c,d){var e=new Firebase(b).child("gates"),f=new Firebase(b).child("gateOptions");return{addNewGate:function(b){var c=a.defer();c.notify("addNewDoor working with: "+b.type+".");var d=e.push();return d.set(b,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},updateGate:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$save().then(function(a){c.resolve("성공적으로 수정되었습니다.")},function(a){c.reject(a)}),c.promise},deleteGate:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$remove().then(function(a){c.resolve("성공적으로 삭제되었습니다.")},function(a){c.reject(a)}),c.promise},findGate:function(a){return c(e.child(a))},listGate:function(a,b){return d(e)},listOptions:function(){var b=a.defer();return d(f).$loaded().then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise},createOptions:function(b){console.log(b);var c=a.defer(),d={name:b,price:0,published:!0},e=f.child(b);return e.set(d,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},deleteOptions:function(b){var c=a.defer(),d=f.child(b),e=function(a){a?c.reject(a):c.resolve("해당 옵션을 삭제 하였습니다.")};return d.remove(e),c.promise},updateOptions:function(b,c){var d=a.defer(),e=f.child(b),g=function(a){a?d.reject(a):d.resolve("해당 옵션을 저장하였습니다.")};return e.update(c,g),d.promise}}}]),angular.module("initApp").controller("PartNewCtrl",["$scope","$location","PartService",function(a,b,c){a.title="부속품 등록",a.action1="등록",a.action2="취소",a.action1Process=function(){var d=c.addNewPart(a.partObj);d.then(function(a){alert("Success: "+a),b.path("/gates")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.action2Process=function(){a.partObj=null}}]),angular.module("initApp").factory("PartService",["$q","FBURL","$firebaseObject","$firebaseArray",function(a,b,c,d){var e=new Firebase(b).child("parts");new Firebase(b).child("partOptions");return{addNewPart:function(b){var c=a.defer();c.notify("addNewDoor working with: "+b.type+".");var d=e.push();return d.set(b,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.");
}),c.promise},updatePart:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.name+"."),b.$save().then(function(a){c.resolve("성공적으로 수정되었습니다.")},function(a){c.reject(a)}),c.promise},deletePart:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.name+"."),b.$remove().then(function(a){c.resolve("성공적으로 삭제되었습니다.")},function(a){c.reject(a)}),c.promise},findPart:function(a){return c(e.child(a))},listPart:function(a,b){return d(e)}}}]),angular.module("initApp").controller("InoutsCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("SaleDetailCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("initApp").controller("SaleNewCtrl",["$scope","$location","$mdMedia","$mdDialog","$timeout","$q","$log","FBURL","$firebaseArray","SaleService",function(a,b,c,d,e,f,g,h,i,j){function k(a){alert("Sorry! You'll need to create a Constituion for "+a+" first!")}function l(b){var c;b?a.states.filter(o(b)):a.states;if(a.simulateQuery){c=f.defer();var d=new Firebase(h).child("customers"),e=i(d);return e.$loaded().then(function(a){c.resolve(a)}),c.promise}return e}function m(a){g.info("Text changed to "+a)}function n(a){g.info("Item changed to "+JSON.stringify(a))}function o(a){var b=angular.lowercase(a);return function(a){return 0===a.value.indexOf(b)}}a.title="주문등록",a.action1="등록",a.action2="취소",a.action1Process=function(){var c=j.addNewSale(a.saleObj);c.then(function(a){alert("Success: "+a),b.path("/sales")},function(a){alert("Error: "+result)},function(a){console.log(a)})},a.openDialog=function(b,e){var f=(c("sm")||c("xs"))&&a.customFullscreen;d.show({controller:"ProductFormDialogCtrl",templateUrl:"views/tmp/productFormDialog.html",parent:angular.element(document.body),targetEvent:b,locals:{target:"gateOptions",type:e},clickOutsideToClose:!0,fullscreen:f}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return c("xs")||c("sm")},function(b){a.customFullscreen=b===!0})},a.action2Process=function(){a.saleObj=null},a.simulateQuery=!0,a.isDisabled=!1,a.querySearch=l,a.selectedItemChange=n,a.searchTextChange=m,a.newState=k}]),angular.module("initApp").factory("Message",["$firebaseArray",function(a){function b(a){this.message_id=a.key(),this.message=a.val()}return b.prototype={update:function(a){return a.val()!==this.message?(this.message=a.val(),!0):!1},toJSON:function(){return this.message}},b}]),angular.module("initApp").factory("MessageFactory",["$firebaseArray","Message",function(a,b){return a.$extend({$$added:function(a){return new b(a)},$$updated:function(a){var b=this.$getRecord(a.key());return b.update(a)},$$getKey:function(a){return a.message_id}})}]),angular.module("initApp").factory("MessageList",["MessageFactory",function(a){return function(b){return new a(b)}}]),angular.module("initApp").factory("SaleService",["$q","FBURL","$firebaseObject","$firebaseArray",function(a,b,c,d){var e=new Firebase(b).child("gates");return{addNewSale:function(b){var c=a.defer();c.notify("addNewDoor working with: "+b.type+".");var d=e.push();return d.set(b,function(a){a?c.reject(a):c.resolve("성공적으로 저장되었습니다.")}),c.promise},updateSale:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$save().then(function(a){c.resolve("성공적으로 수정되었습니다.")},function(a){c.reject(a)}),c.promise},deleteSale:function(b){var c=a.defer();return c.notify("addNewDoor working with: "+b.type+"."),b.$remove().then(function(a){c.resolve("성공적으로 삭제되었습니다.")},function(a){c.reject(a)}),c.promise},findSale:function(a){return c(e.child(a))},listSale:function(a,b){return d(e)}}}]),angular.module("initApp").controller("ProductFormDialogCtrl",["$scope","$mdDialog","FBURL","$firebaseArray","FrameService","DoorService","GateService","target","type",function(a,b,c,d,e,f,g,h,i){var j=new Firebase(c).child(h),k=new Firebase(c).child("frames").orderByChild("type").equalTo(i);a.targets=d(k),a.options=d(j),a.updatePubStatus=function(b){a.options.$save(b)},a.answer=function(c){a.options.$save(),b.hide(c)},a.deleteRecord=function(b){a.options.$remove(b)},a.createNewOption=function(a){"frameOptions"==h?e.createOptions(a):"doorOptions"==h?(console.log(a),f.createOptions(a)):"gateOptions"==h&&(console.log(a),g.createOptions(a))}}]),angular.module("initApp").controller("MsgboardCtrl",["FBURL","$scope","$timeout","$firebaseObject","MsgboardService","$routeParams","Auth","CheckAdminService",function(a,b,c,d,e,f,g,h){function i(){var a=e.loadAllMsgOfUser(b.userkey);a.then(function(a){console.log(a),b.messages=a})}function j(){var a={sender:g.$getAuth().uid||null,title:b.msgTitle,body:b.msgBody},c=e.addMsg(a);c.then(function(a){e.msgKeyIntoUser(a,b.userkey)})}var k=new Firebase(a).child("users");b.userkey=f.userkey,b.adminCheck=h.adminChecker,b.pushMsg=j,k.child(b.userkey).on("value",function(){console.log("온"),i()}),b.adminCheck().then(function(a){"admin"==a?b.isAdmin=!0:b.isAdmin=!1})}]),angular.module("initApp").service("MsgboardService",["$q","FBURL","$firebaseObject","$routeParams","ADMINKEY",function(a,b,c,d,e){function f(b){var c=a.defer(),d=p.push();return d.set(b,function(a){a?c.reject(a):c.resolve(d.key())}),c.promise}function g(a,b){o.child(b).child("msg").child(a).set({message:!0},function(a){a&&console.log(a)})}function h(b){var c=a.defer();return o.child(b).child("msg").once("value",function(a){k(a).then(function(a){console.log(a),c.resolve(a)})}),c.promise}function i(){var b=a.defer();return p.once("value",function(a){b.resolve(a.val())}),b.promise}function j(b){var d=a.defer();return c(p.child(b)).$loaded(function(a){a.title?(console.log("FOUND IN UNREADMSG REF!"),d.resolve(a)):c(q.child(b)).$loaded(function(a){a.title?(console.log("FOUND IN READMSG REF!"),d.resolve(a)):(console.log("NO MESSAGE.."),d.reject("No Msg"))})}),d.promise}function k(b){var d=a.defer(),e=[],f=-1,g=b.numChildren();return b.forEach(function(a){var b=a.key();c(p.child(b)).$loaded(function(a){a.title?(e.push(a),f++):c(q.child(b)).$loaded(function(a){a.title?(e.push(a),f++):console.log("NO MESSAGE")}),g==f+1&&d.resolve(e)})}),d.promise}function l(b){var d=a.defer();return c(o.child(b)).$loaded(function(a){d.resolve(a.email)}),d.promise}function m(a,b){var d=new Date,e=d.getFullYear()+"년";e+=d.getMonth()+1+"월",e+=d.getDate()+"일",e+=d.getHours()+"시",e+=d.getMinutes()+"분",c(p.child(a)).$loaded(function(c){q.child(a).set({sender:c.sender,title:c.title,body:c.body,readAt:e,readBy:b},function(){console.log("UNREAD TO READ!"),p.child(c.$id).remove()})})}var n=new Firebase(b).child("MESSAGES"),o=new Firebase(b).child("users"),p=(new Firebase(b).child("ADMIN"),n.child("UNREAD")),q=n.child("READ"),r={addMsg:f,msgKeyIntoUser:g,loadCurrentMsg:j,loadAllUnreadMsg:i,loadAllMsgOfUser:h,unreadToRead:m,decodeUserkey:l};return r}]),angular.module("initApp").factory("CheckAdminService",["FBURL","$firebaseObject","$q","ADMINKEY","Auth",function(a,b,c,d,e){function f(){var a=e.$getAuth(),b=c.defer();if(a){var f=a.uid;f==d?b.resolve("admin"):b.resolve("user")}return b.promise}return{adminChecker:f}}]),angular.module("initApp").controller("MsgboardadminCtrl",["$scope","MsgboardService",function(a,b){a.loadAllUnreadMsg=b.loadAllUnreadMsg,a.loadAllUnreadMsg().then(function(b){a.unreadMsgs=b})}]),angular.module("initApp").controller("MsgitemCtrl",["$scope","$routeParams","MsgboardService","CheckAdminService","Auth",function(a,b,c,d,e){a.isAdmin=!1,a.userkey=b.userkey,a.msgItemKey=b.msgItem,a.adminCheck=d.adminChecker,a.loadCurrentMsg=c.loadCurrentMsg,a.unreadToRead=function(){c.unreadToRead(a.msgItemKey,e.$getAuth().uid)},a.adminCheck().then(function(b){console.log(b),"user"==b?a.isAdmin=!1:"admin"==b&&(a.isAdmin=!0)}),a.loadCurrentMsg(a.msgItemKey).then(function(b){a.message=b})}]);